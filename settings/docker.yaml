- name: ckanext-spatial
  repository: https://github.com/frafra/ckanext-spatial
  version: no-extras_list
  settings_add:
    - ["app:main", ckan.plugins, spatial_metadata spatial_query]
  settings_set:
    - ["app:main", ckanext.spatial.search_backend, solr]
  targets:
    - dev
    - deploy
    - deploy-gitlab
#- name: ckanext-geoview
#  repository: https://github.com/ckan/ckanext-geoview
#  version: v0.0.13
#  settings_add:
#    - ["app:main", ckan.plugins, resource_proxy geojson_view]
#  settings_set:
#    - ["app:main", ckan.views.default_views, geojson_view]
#  targets:
#    - dev
#    - deploy
- name: ckanext-datasetversions
  repository: https://github.com/frafra/ckanext-datasetversions.git
  version: staging
  settings_add:
    - ["app:main", ckan.plugins, datasetversions]
  targets:
    - deploy
    - deploy-gitlab
- name: ckanext-datasetversions
  repository: ckanext-datasetversions
  local: true
  settings_add:
    - ["app:main", ckan.plugins, datasetversions]
  targets:
    - dev
- name: ckanext-coat
  repository: https://$GITLAB_USERNAME:$GITLAB_PASSWORD@gitlab.com/nina-data/ckanext-coat.git
  version: master
  settings_add:
    - ["app:main", ckan.plugins, coat]
    - ["app:main", ckanext.coat.resource_name_globally_unique, true]
  targets:
    - deploy
- name: ckanext-coat
  repository: https://gitlab-ci-token:$CI_JOB_TOKEN@gitlab.com/nina-data/ckanext-coat.git
  version: master
  settings_add:
    - ["app:main", ckan.plugins, coat]
    - ["app:main", ckanext.coat.resource_name_globally_unique, true]
  targets:
    - deploy-gitlab
- name: ckanext-coat
  local: true
  repository: ckanext-coat
  settings_add:
    - ["app:main", ckan.plugins, coat]
    - ["app:main", ckanext.coat.resource_name_globally_unique, true]
  targets:
    - dev
- name: ckanext-coatcustom
  repository: https://$GITLAB_USERNAME:$GITLAB_PASSWORD@gitlab.com/nina-data/ckanext-coatcustom.git
  version: master
  settings_add:
    - ["app:main", ckan.plugins, coatcustom]
  targets:
    - deploy
- name: ckanext-coatcustom
  repository: https://gitlab-ci-token:$CI_JOB_TOKEN@gitlab.com/nina-data/ckanext-coatcustom.git
  version: master
  settings_add:
    - ["app:main", ckan.plugins, coatcustom]
  targets:
    - deploy-gitlab
- name: ckanext-coatcustom
  local: true
  repository: ckanext-coatcustom
  settings_add:
    - ["app:main", ckan.plugins, coatcustom]
  targets:
    - dev
- name: config
  settings_set:
    - ["app:main", ckan.site_title, "COAT catalog"]
    - ["app:main", ckan.site_intro_text, "# Welcome to the COAT catalog"]
    - ["app:main", ckan.site_logo, "https://www.coat.no/Portals/coat/Images/cropped-coat_logo_black2014_tr.png"]
    - ["app:main", ckan.datastore.sqlalchemy.pool_pre_ping, true]
  targets:
    - dev
    - deploy
    - deploy-gitlab
- name: config-dev
  settings_set:
    - [DEFAULT, debug, true]
  targets:
    - dev
