- name: ckanext-scheming
  repository: https://github.com/ckan/ckanext-scheming
  version: master
  settings_add:
    - ["app:main", ckan.plugins, scheming_datasets]
  settings_set:
    - ["app:main", scheming.dataset_schemas, "ckanext.coatcustom:coat_schema.json"]
    - ["app:main", scheming.presets, "ckanext.scheming:presets.json"]
    - ["app:main", scheming.dataset_fallback, false]
  targets:
    - dev
    - deploy
    - deploy-gitlab
- name: ckanext-spatial
  repository: https://github.com/frafra/ckanext-spatial
  version: no-extras_list
  settings_add:
    - ["app:main", ckan.plugins, spatial_metadata spatial_query]
  settings_set:
    - ["app:main", ckanext.spatial.search_backend, solr]
  targets:
    - dev
    - deploy
    - deploy-gitlab
#- name: ckanext-geoview
#  repository: https://github.com/ckan/ckanext-geoview
#  version: v0.0.13
#  settings_add:
#    - ["app:main", ckan.plugins, resource_proxy geojson_view]
#  settings_set:
#    - ["app:main", ckan.views.default_views, geojson_view]
#  targets:
#    - dev
#    - deploy
- name: ckanext-datasetversions
  repository: https://github.com/frafra/ckanext-datasetversions.git
  version: private-datasets
  settings_add:
    - ["app:main", ckan.plugins, datasetversions]
  targets:
    - deploy
    - deploy-gitlab
- name: ckanext-datasetversions
  repository: ckanext-datasetversions
  local: true
  settings_add:
    - ["app:main", ckan.plugins, datasetversions]
  targets:
    - dev
- name: ckanext-coat
  repository: https://$GITLAB_USERNAME:$GITLAB_PASSWORD@gitlab.com/nina-data/ckanext-coat.git
  version: master
  settings_add:
    - ["app:main", ckan.plugins, coat]
  targets:
    - deploy
- name: ckanext-coat
  repository: https://gitlab-ci-token:$CI_JOB_TOKEN@gitlab.com/nina-data/ckanext-coat.git
  version: master
  settings_add:
    - ["app:main", ckan.plugins, coat]
  targets:
    - deploy-gitlab
- name: ckanext-coat
  local: true
  repository: ckanext-coat
  settings_add:
    - ["app:main", ckan.plugins, coat]
  targets:
    - dev
- name: ckanext-coatcustom
  repository: https://$GITLAB_USERNAME:$GITLAB_PASSWORD@gitlab.com/nina-data/ckanext-coatcustom.git
  version: master
  settings_add:
    - ["app:main", ckan.plugins, coatcustom]
  targets:
    - deploy
- name: ckanext-coatcustom
  repository: https://gitlab-ci-token:$CI_JOB_TOKEN@gitlab.com/nina-data/ckanext-coat.git
  version: master
  settings_add:
    - ["app:main", ckan.plugins, coatcustom]
  targets:
    - deploy-gitlab
- name: ckanext-coatcustom
  local: true
  repository: ckanext-coatcustom
  settings_add:
    - ["app:main", ckan.plugins, coatcustom]
  targets:
    - dev
- name: config
  settings_set:
    - ["app:main", ckan.site_title, "COAT catalog"]
    - ["app:main", ckan.site_intro_text, "# Welcome to the COAT catalog"]
    - ["app:main", ckan.site_logo, "images/coat.png"]
    - ["app:main", ckan.datastore.sqlalchemy.pool_pre_ping, true]
    - ["app:main", ckan.favicon, "images/coat.png"]
  targets:
    - dev
    - deploy
    - deploy-gitlab
- name: config-dev
  settings_set:
    - [DEFAULT, debug, true]
  targets:
    - dev
